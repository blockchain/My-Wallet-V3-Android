task deleteGitHooksSamples(
        type: Delete,
        group: 'Setup',
        description: 'Remove all local git hooks'
) {
    delete '.git/hooks'
}

task setFilePermissions(type: Exec) {
    // Mark all files in the .git/hooks directory as executable
    commandLine 'sh', '-c', 'find .git/hooks -type f -exec chmod 755 {} \\;'
}

task installGitHooks(
        type: Copy,
        dependsOn: 'deleteGitHooksSamples',
        group: 'Setup',
        description: 'Install local git hooks (will first remove all existing githooks)'
) {
    from 'githooks/'
    into '.git/hooks'
    doLast {
      setFilePermissions.execute()
    }
}
